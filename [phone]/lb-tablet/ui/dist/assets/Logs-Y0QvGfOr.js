import{u as O,y as I,r,L as n,k as p,bl as g,N as o,a3 as y,j as a,o as v,a as c,O as k,bj as D,br as T,c as S,bh as m,aa as C,bt as x,bn as N,bm as j}from"./index-CFbY8QCl.js";const d=I([]);function F(){const u=O(d),[h,P]=r.useState(""),[b,L]=r.useState(""),[w,G]=r.useState({});let f={create:{label:n("APPS.POLICE.LOGS.CREATED"),color:"green"},update:{label:n("APPS.POLICE.LOGS.UPDATED"),color:"orange"},delete:{label:n("APPS.POLICE.LOGS.DELETED"),color:"red"}};r.useEffect(()=>{const e=setTimeout(()=>P(b),500);return()=>clearTimeout(e)},[b]),r.useEffect(()=>{p("Ambulance",{action:"getLogs",query:h},g.logs).then(e=>{if(!e)return o("warning","No logs found");d.set(e)})},[h]);const{handleScroll:E}=y({fetchData:()=>p("Ambulance",{action:"getLogs",query:h,lastId:u[u.length-1].id}),onDataFetched:e=>d.set([...d.value,...e]),perPage:10}),s={report:{action:"getReport",mock:g.reports,cb:e=>{j.set(e),N.set("reports")}},profile:{action:"fetchProfile",mock:g.profiles,cb:e=>{x.set(e),N.set("journals")}}},A=(e,t)=>{var l;if(!e||!t)return o("warning","No type or id provided");p("Ambulance",{action:s[e].action,id:t},(l=s[e])==null?void 0:l.mock.find(i=>i.id===t)).then(i=>{if(!i)return o("warning","No data found");s[e].cb(i)})};return a(v.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{ease:"easeInOut",duration:.25},className:"policepage-container",children:a("main",{className:"main profiles",children:c("div",{className:"page",children:[a("div",{className:"top",children:a("div",{className:"title",children:n("APPS.POLICE.LOGS.TITLE")})}),a(k,{placeholder:"Search",onChange:e=>L(e.target.value)}),a("div",{className:"items",onScroll:E,children:u.map((e,t)=>{var l;return c(v.div,{...D,id:last,className:"item","data-clickable":"false",children:[a("img",{src:T(e.avatar)}),c("div",{className:"info",children:[c("div",{className:"name",children:[S(e.type),' - "',e.title,'"']}),e.description&&a("div",{className:"subtitle",children:e.description.substring(0,150)}),c("div",{className:"cards",children:[a("div",{className:m("card",f[e.action].color),children:f[e.action].label}),e.action!=="delete"&&(s==null?void 0:s[e.type])&&a("div",{className:m("card blue clickable"),onClick:()=>{if(e.action!=="delete"){if(!e.type||!e.relatedId)return o("warning","No type or id provided");A(e.type,e.relatedId)}},children:n("APPS.POLICE.LOGS.VIEW_FOOTER",{type:S(e.type),id:(l=e==null?void 0:e.relatedId)==null?void 0:l.toString()})})]}),c("div",{className:"id",children:[a("div",{className:"label",children:e.username}),a("div",{children:" - "}),a("div",{className:"value",children:C(e.timestamp)})]})]})]},t)})})]})})})}export{F as default};
