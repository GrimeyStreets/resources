import{u as k,r as o,L as s,k as v,bu as t,N as h,y,a3 as A,j as a,o as S,a as r,O as C,bj as w,be as D,c as N,bh as m,aa as T,bE as x,bw as n,bF as G,by as R,bB as F,bv as j}from"./index-CFbY8QCl.js";const u=y([]);function z(){const p=k(u),[g,E]=o.useState(""),[f,L]=o.useState(""),[V,W]=o.useState({});let b={create:{label:s("APPS.POLICE.LOGS.CREATED"),color:"green"},update:{label:s("APPS.POLICE.LOGS.UPDATED"),color:"orange"},delete:{label:s("APPS.POLICE.LOGS.DELETED"),color:"red"}};o.useEffect(()=>{const e=setTimeout(()=>E(f),500);return()=>clearTimeout(e)},[f]),o.useEffect(()=>{v("Police",{action:"getLogs",query:g},t.logs).then(e=>{if(!e)return h("warning","No logs found");u.set(e)})},[g]);const{handleScroll:O}=A({fetchData:()=>v("Police",{action:"getLogs",query:g,lastId:p[p.length-1].id}),onDataFetched:e=>u.set([...u.value,...e]),perPage:10}),c={report:{action:"getReport",mock:t.reports,cb:e=>{j.set(e),n.set("reports")}},case:{action:"getCase",mock:t.cases,cb:e=>{F.set(e),n.set("cases")}},warrant:{action:"getWarrant",mock:t.warrants,cb:e=>{R.set(e),n.set("warrants")}},profile:{action:"fetchProfile",mock:t.profiles,cb:e=>{G.set(e),n.set("profiles")}},vehicle:{action:"fetchVehicle",mock:t.vehicles,cb:e=>{x.set(e),n.set("vehicles")}}},I=(e,l)=>{var i,P;if(!e||!l)return h("warning","No type or id provided");v("Police",{action:(i=c[e])==null?void 0:i.action,id:l},(P=c[e])==null?void 0:P.mock.find(d=>d.id===l)).then(d=>{if(!d)return h("warning","No data found");c[e].cb(d)})};return a(S.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{ease:"easeInOut",duration:.25},className:"policepage-container",children:a("main",{className:"main profiles",children:r("div",{className:"page",children:[a("div",{className:"top",children:a("div",{className:"title",children:s("APPS.POLICE.LOGS.TITLE")})}),a(C,{placeholder:s("APPS.POLICE.LOGS.SEARCH"),onChange:e=>L(e.target.value)}),a("div",{className:"items",onScroll:O,children:p.map((e,l)=>{var i;return r(S.div,{...w,className:"item","data-clickable":"false",children:[a("img",{src:D(e.avatar,e.type)}),r("div",{className:"info",children:[r("div",{className:"name",children:[N(e.type),' - "',e.title,'"']}),a("div",{className:"subtitle",children:e.description.substring(0,150)}),r("div",{className:"cards",children:[a("div",{className:m("card",b[e.action].color),children:b[e.action].label}),e.action!=="delete"&&(c==null?void 0:c[e.type])&&a("div",{className:m("card blue clickable"),onClick:()=>{if(e.action!=="delete"){if(!e.type||!e.relatedId)return h("warning","No type or id provided");I(e.type,e.relatedId)}},children:s("APPS.POLICE.LOGS.VIEW_FOOTER",{type:N(e.type),id:(i=e==null?void 0:e.relatedId)==null?void 0:i.toString()})})]}),r("div",{className:"id",children:[a("div",{className:"label",children:e.username}),a("div",{children:" - "}),a("div",{className:"value",children:T(e.timestamp)})]})]})]},l)})})]})})})}export{z as default};
