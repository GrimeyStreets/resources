import{r as N,j as e,I as V,u as p,S as t,D as $,a as i,F as T,C,L as s,c as W,b as j,d as k,e as Y,f as z,g as q,h as M,i as y,k as b,M as K,l as Z,m as _,n as U,o as L,p as B,q as x,s as G,T as J,t as X,v as Q,w as ee,x as F,y as H,A as ae,z as se,B as ne,E as ie,G as te,H as le,J as ce,K as re,N as O,O as oe,P as de}from"./index-CFbY8QCl.js";function w(a){const[l,S]=N.useState(a.value),[c,r]=N.useState(D(l,a.min,a.max));return e(V,{type:"range",className:"sliderInput",min:a.min,max:a.max,defaultValue:l,step:a.step,onChange:d=>{let m=parseFloat(d.target.value);S(m),a.onChange(m),r(D(parseFloat(d.target.value),a.min,a.max))},style:{background:`linear-gradient(to right, #0a84ff 0%, #0a84ff ${c}%, #636366 ${c}%, #636366 100%)`}})}function D(a,l,S,c){var r=(a-l)*100/(S-l);return r>100?r=100:r<0&&(r=0),r}function Se(){const a=p(t),l=p($),S=["#39334d","#465281","#87855e","#4b6a45","#702e2e","picker"];return i(T,{children:[e("div",{className:"category-title",children:s("APPS.SETTINGS.APPEARANCE")}),i("section",{children:[e("div",{className:"settings-item",children:e("div",{className:"appearance-container",children:e("div",{className:"appearance-switches",children:["light","dark"].map((c,r)=>i("div",{className:"mode",onClick:()=>t.set({...t.value,display:{...a.display,theme:c}}),children:[e("img",{src:`./assets/img/${c}-mode-placeholder.png`,alt:"Theme"}),e("div",{className:"mode-text",children:W(c)}),e(j,{checked:a.display.theme===c})]},r))})})}),i("div",{className:"settings-item",children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.AUTOMATIC")})}),e("div",{className:"setting-value",children:e(k,{onChange:()=>{t.set({...t.value,display:{...a.display,automatic:!a.display.automatic}})}})})]})]}),e("div",{className:"category-title",children:s("APPS.SETTINGS.BRIGHTNESS")}),e("section",{children:i("div",{className:"settings-item",children:[e(Y,{}),e(w,{onChange:c=>t.set({...t.value,display:{...a.display,brightness:c}}),value:a.display.brightness,min:.1,max:1,step:.01}),e(z,{})]})}),e("div",{className:"category-title",children:s("APPS.SETTINGS.TABLET_SCALE")}),e("section",{children:i("div",{className:"settings-item",children:[e(q,{}),e(w,{onChange:c=>{l||t.set({...t.value,display:{...a.display,size:c}})},value:a.display.size??1,min:.8,max:1.4,step:.1}),e(M,{})]})}),C.value.AllowFrameColorChange&&i(T,{children:[e("div",{className:"category-title",children:s("APPS.SETTINGS.FRAME_COLOR")}),e("section",{children:e("div",{className:"settings-item",children:e("div",{className:"colors",children:S.map((c,r)=>{let d=c==="picker";return e("div",{className:"color",style:{backgroundImage:d&&"url(./assets/img/icons/picker.png)",boxShadow:!d&&`inset 0 0.1rem 5rem ${c}, 0 0 0 0.15rem hsl(254, 30%, 85%)`},"data-active":a.display.frameColor===c,onClick:()=>{if(d){y.ColorPicker.set({onSelect:m=>{t.set({...t.value,display:{...a.display,frameColor:m}})}});return}else t.set({...t.value,display:{...a.display,frameColor:c}})}},r)})})})})]})]})}function me(){const a=p(t);return i(T,{children:[e("div",{className:"category-title",children:"Software Update"}),e("section",{children:i("div",{className:"settings-item",style:{cursor:"pointer"},children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.AUTOMATIC_UPDATES")})}),e("div",{className:"setting-value",children:e("div",{className:"value",children:s("APPS.SETTINGS.OFF")})})]})}),a.version!==a.latestVersion&&e("section",{children:i("div",{className:"settings-item",style:{flexDirection:"column",alignItems:"inherit",gap:"0.75rem"},children:[i("div",{className:"item-header",children:[e("img",{src:"./assets/img/icons/lbos.webp"}),i("div",{className:"info",children:[e("div",{className:"title",children:a.latestVersion}),e("div",{className:"author",children:e(ue,{})})]})]}),e("div",{className:"item-content",children:"Please tell your server owner to update the tablet to the latest version."})]})}),a.version===a.latestVersion&&i("div",{className:"up-to-date",children:[i("div",{className:"version",children:["V ",a==null?void 0:a.version]}),e("div",{className:"title",children:s("APPS.SETTINGS.UP_TO_DATE")})]})]})}const ue=()=>{const a="abcdefghijklmnopqrstuvwxyz".split("");return i(T,{children:[a[11].toUpperCase(),a[1].toUpperCase()]})};function Ne({type:a}){return i(T,{children:[e("div",{style:{marginTop:"0.5rem"}}),e("section",{children:a==="Language"&&e(ve,{})})]})}const ve=()=>{const a=p(t),[l,S]=N.useState([]);return N.useEffect(()=>{b("getLocales",null,K).then(c=>{c&&S(c)})},[]),N.useEffect(()=>{Z(a.locale)},[a.locale]),e(T,{children:l.map((c,r)=>e("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>t.set({...t.value,locale:c.locale}),children:i("div",{className:"setting",children:[c.locale===a.locale?e(_,{className:"checkmark"}):e(_,{className:"checkmark hidden"}),e("div",{className:"title",children:c.name})]})},r))})};function he(){var r,d;const a=p(t),l=p(C),[S,c]=N.useState(!1);return U("settings:back",()=>{S&&c(!1)}),e(L.div,{...B(S?"right":"left",S.toString(),.2),className:"settings-content",children:S?i("div",{className:"wallpapers-container",children:[e("div",{className:"wallpaper add",onClick:()=>{var m,h,o;y.Gallery.set({allowExternal:(o=(h=(m=C)==null?void 0:m.value)==null?void 0:h.AllowExternal)==null?void 0:o.Other,onSelect:P=>{t.patch({wallpaper:{...a.wallpaper,background:P.src}})}})},children:e(M,{})}),((r=a.wallpaper)==null?void 0:r.background.includes("http"))&&e("div",{className:"wallpaper active",style:{backgroundImage:`url(${(d=a.wallpaper)==null?void 0:d.background})`}}),Object.keys(l.Wallpapers).map((m,h)=>e(pe,{wallpaper:m,selected:a.wallpaper.background===m,cb:()=>{t.set({...t.value,wallpaper:{...t.value.wallpaper,background:m}})}},h))]}):e(ge,{setExploringWallpapers:c})})}const pe=({wallpaper:a,selected:l,cb:S})=>{const[c,r]=N.useState("");return N.useEffect(()=>{x(a,d=>r(d))},[]),e("div",{className:`wallpaper ${l?"active":""}`,style:{backgroundImage:`url(${c})`},onClick:S})},ge=({setExploringWallpapers:a})=>{var r;const l=p(t),[S,c]=N.useState(null);return N.useEffect(()=>{x(l.wallpaper.background,d=>c(d))},[l==null?void 0:l.wallpaper]),i("section",{children:[i("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>{g.set([...g.value,{name:"Wallpapers"}]),a(!0)},children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.CHOOSE_NEW_WALLPAPER")})}),e("div",{className:"setting-value",children:e(G,{className:"chevron"})})]}),e("div",{className:"settings-item",children:i("div",{className:"wallpapers",children:[e("div",{className:"preview",style:{backgroundImage:S&&`url(${S})`},children:e("div",{className:"preview-lockscreen-container",children:e(J,{layout:((r=l==null?void 0:l.lockscreen)==null?void 0:r.layout)??1})})}),e("div",{className:"preview",style:{backgroundImage:S&&`url(${S})`},children:i("div",{className:"preview-homescreen-container",children:[e("div",{className:"preview-homescreen-apps",children:l.apps[1].filter(d=>!X(d)).slice(0,24).map(d=>{var o;let m=C.value.apps[d],h=((o=m==null?void 0:m[d])==null?void 0:o.icon)??`./assets/img/icons/apps/${d}.jpg`;return i("div",{className:"settings-homescreen-app",children:[e("img",{src:h,onError:P=>P.currentTarget.src="./assets/img/icons/apps/unkown.png"}),e("div",{className:"app-name",children:d})]})})}),e("div",{className:"favourite-apps",children:l.apps[0].map(d=>e("div",{className:"settings-homescreen-app",children:e("img",{src:`./assets/img/icons/apps/${d}.jpg`})}))})]})})]})}),i("div",{className:"settings-item",children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.BLUR_HOMESCREEN")})}),e("div",{className:"setting-value",children:e(k,{checked:l.wallpaper.blur,onChange:()=>{t.set({...t.value,wallpaper:{...l.wallpaper,blur:!l.wallpaper.blur}})}})})]})]})};function Te(){var m,h,o,P;const a=p(C),l=p(t),[S,c]=N.useState(!1),[r,d]=N.useState(null);return U("settings:back",()=>{S&&(c(!1),d(null))}),i(L.div,{...B(S?"right":"left",S.toString(),.2),className:"settings-content",children:[e("div",{style:{marginTop:"0.5rem"}}),S?e(T,{children:i("section",{children:[i("div",{className:"settings-item",children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.ALLOW_NOTIFICATIONS")})}),e("div",{className:"setting-value",children:e(k,{onChange:()=>{var v,u,E;t.set({...t.value,notifications:{...l.notifications,[r]:{...(v=l.notifications)==null?void 0:v[r],enabled:!((E=(u=l.notifications)==null?void 0:u[r])!=null&&E.enabled)}}})},checked:((h=(m=l.notifications)==null?void 0:m[r])==null?void 0:h.enabled)??!0})})]}),i("div",{className:"settings-item",children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.SOUNDS")})}),e("div",{className:"setting-value",children:e(k,{onChange:()=>{var v,u,E;t.set({...t.value,notifications:{...l.notifications,[r]:{...(v=l.notifications)==null?void 0:v[r],sound:!((E=(u=l.notifications)==null?void 0:u[r])!=null&&E.sound)}}})},checked:((P=(o=l.notifications)==null?void 0:o[r])==null?void 0:P.sound)??!0})})]})]})}):i(T,{children:[e("div",{className:"category-title",children:s("APPS.SETTINGS.NOTIFICATIONS")}),e("section",{style:{marginBottom:"4rem"},children:Object.keys(a.apps).filter(v=>{var u;return Q(v)||((u=a.apps[v])==null?void 0:u.removable)===!1}).sort((v,u)=>s(`APP_NAMES.${v}`,null,a.apps[v].name).localeCompare(s(`APP_NAMES.${u}`,null,a.apps[u].name))).map((v,u)=>i("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>{d(v),c(!0),g.set([...g.value,{name:"Notifications"}])},children:[i("div",{className:"setting",children:[e("img",{src:a.apps[v].icon??`./assets/img/icons/apps/${v}.jpg`}),e("div",{className:"title",children:s(`APP_NAMES.${v}`,null,a.apps[v].name)})]}),e("div",{className:"setting-value",children:e(G,{className:"chevron"})})]},u))})]})]})}function Pe(){p(C);const a=p(t),[l,S]=N.useState(!1);return e(T,{children:i(T,{children:[e("div",{className:"category-title",children:s("APPS.SETTINGS.RINGTONE_VOLUME")}),e("section",{children:i("div",{className:"settings-item",children:[e(ee,{}),e(w,{onChange:c=>{t.set({...t.value,sound:{...t.value.sound,volume:c}})},value:a.sound.volume,min:0,max:1,step:.05}),e(F,{})]})})]})})}const Ie=H(null),g=H([]);function Ae(){var E,R;const a=p(t),l=p(ae),[S,c]=N.useState(""),[r,d]=N.useState(null),[m,h]=N.useState(null),o=p(g);let P=[[{name:s("APPS.SETTINGS.AIRPLANE_MODE"),description:s("APPS.SETTINGS.AIRPLANE_MODE_DESCRIPTION"),icon:e(se,{className:"orange"}),switch:!0,value:a.airplaneMode,onChange:()=>{t.set({...t.value,airplaneMode:!a.airplaneMode})}},{name:s("APPS.SETTINGS.STREAMER_MODE"),description:s("APPS.SETTINGS.STREAMER_MODE_DESCRIPTION"),icon:e(ne,{className:"purple"}),switch:!0,value:a==null?void 0:a.streamerMode,onChange:()=>{t.set({...t.value,streamerMode:!a.streamerMode})}}],[{name:s("APPS.SETTINGS.NOTIFICATIONS"),description:s("APPS.SETTINGS.NOTIFICATIONS_DESCRIPTION"),icon:e(ie,{className:"red"}),options:e(Te,{})},{name:s("APPS.SETTINGS.SOUND_HAPTICS"),description:s("APPS.SETTINGS.SOUND_HAPTICS_DESCRIPTION"),icon:e(F,{className:"pink"}),options:e(Pe,{})}],[{name:s("APPS.SETTINGS.GENERAL"),description:s("APPS.SETTINGS.GENERAL_DESCRIPTION"),icon:e(te,{className:"grey"}),options:[[{name:s("APPS.SETTINGS.ABOUT"),options:[[{name:s("APPS.SETTINGS.VERSION"),value:`V${a.version}`},{name:s("APPS.SETTINGS.MODEL_NAME"),value:"LB Tablet"},{name:s("APPS.SETTINGS.SERIAL_NUMBER"),value:"DSDWWWSSF3"},{name:s("APPS.SETTINGS.DEVELOPED_BY"),value:"Breze & Loaf Scripts"},{name:s("APPS.SETTINGS.PURCHASE_AT"),value:"https://lbscripts.com"}],[{name:s("APPS.SETTINGS.SONGS"),value:"0"},{name:s("APPS.SETTINGS.VIDEOS"),value:"0"},{name:s("APPS.SETTINGS.PHOTOS")},{name:s("APPS.SETTINGS.APPLICATIONS")},{name:s("APPS.SETTINGS.CAPACITY")},{name:s("APPS.SETTINGS.AVAILABLE")}]]},{name:s("APPS.SETTINGS.SOFTWARE_UPDATE"),options:e(me,{}),notification:a.version!==a.latestVersion&&1}],[{name:s("APPS.SETTINGS.DATE_TIME"),options:[[{name:s("APPS.SETTINGS.24_HOUR_TIME"),switch:!0,value:!a.time.twelveHourClock,id:"twelveHourClock",onChange:()=>{t.set({...t.value,time:{...a.time,twelveHourClock:!a.time.twelveHourClock}})}}],[{name:s("APPS.SETTINGS.SET_AUTOMATICALLY"),switch:!0,value:!0,disabled:!0},{name:s("APPS.SETTINGS.TIME_ZONE"),value:Intl.DateTimeFormat().resolvedOptions().timeZone??"Unknown"}]]},{name:s("APPS.SETTINGS.LANGUAGE_REGION"),options:[[{name:s("APPS.SETTINGS.LANGUAGE"),value:s("LABEL"),options:e(Ne,{type:"Language"})}]]}],[{name:s("APPS.SETTINGS.RESET_POPUP.TITLE"),onClick:()=>{y.PopUp.set({title:s("APPS.SETTINGS.RESET_POPUP.TITLE"),description:s("APPS.SETTINGS.RESET_POPUP.TEXT"),buttons:[{title:s("APPS.SETTINGS.RESET_POPUP.CANCEL")},{title:s("APPS.SETTINGS.RESET_POPUP.CONFIRM"),color:"red",cb:()=>b("factoryReset")}]})}}]]},{name:s("APPS.SETTINGS.DISPLAY_BRIGHTNESS"),description:s("APPS.SETTINGS.DISPLAY_BRIGHTNESS_DESCRIPTION"),icon:e(le,{className:"blue"}),options:e(Se,{})},{name:s("APPS.SETTINGS.WALLPAPER"),description:s("APPS.SETTINGS.WALLPAPER_DESCRIPTION"),icon:e(ce,{className:"lightblue"}),options:e(he,{})},{name:s("APPS.SETTINGS.BATTERY"),description:s("APPS.SETTINGS.BATTERY_DESCRIPTION"),icon:e(re,{className:"green"})}]];const v=N.useRef(!0),u=N.useRef(!1);return N.useEffect(()=>{if(v.current){v.current=!1;return}O("info","Settings changes detected",t.value),u!=null&&u.current||(O("info","Settings","Changes detected, changing state",t.value),u.current=!0)},[a]),N.useEffect(()=>()=>{u!=null&&u.current&&(O("info","Settings","Changes detected, saving settings",t.value),b("setSettings",t.value),u.current=!1)},[l==null?void 0:l.active]),i("div",{className:"settings-container",children:[i("div",{className:"settings-sidebar",children:[e("div",{className:"settings-header",children:e("div",{className:"title",children:s("APPS.SETTINGS.TITLE")})}),i("div",{className:"settings-content",children:[e(oe,{placeholder:s("SEARCH"),onChange:I=>c(I.target.value)}),i("div",{className:"profile",children:[e("div",{className:"avatar",children:"LB"}),i("div",{className:"profile-info",children:[e("div",{className:"name",children:"LB"}),e("div",{className:"info",children:s("APPS.SETTINGS.CLOUD_BACKUP")})]}),e(G,{className:"chevron"})]}),P.map((I,A)=>e("section",{"data-last":A===P.length-1,children:I.map((n,f)=>i("div",{className:"settings-item","data-clickable":!!(n.options||n.onClick),onClick:()=>{if(n.onClick)return n.onClick();n.options&&(d(n.options),h(n.name),g.reset())},children:[i("div",{className:"setting",children:[n.icon&&(typeof n.icon=="string"?e("img",{src:n.icon}):n.icon),i("div",{className:"setting-info",children:[e("div",{className:"title",children:n.name}),n.description&&e("div",{className:"description",children:n.description})]})]}),n.notification&&e("div",{className:"settings-notification",children:n.notification}),i("div",{className:"setting-value",children:[n.switch&&e(k,{onChange:n.onChange,checked:n.value,disabled:n.disabled??!1}),n.value&&!n.switch&&e("div",{className:"value",children:n.value}),n.options&&e(G,{className:"chevron"})]})]},f))},A))]})]}),i("main",{className:"settings-body",children:[i("div",{className:"settings-header",children:[e("div",{className:"back",onClick:()=>{var I,A,n,f;(I=o==null?void 0:o[o.length-1])!=null&&I.page&&(d((A=o==null?void 0:o[o.length-1])==null?void 0:A.page),h((n=o==null?void 0:o[o.length-1])==null?void 0:n.name)),(f=o==null?void 0:o[o.length-1])!=null&&f.name?(window.postMessage({action:"settings:back"}),h(null),g.set(g.value.slice(0,g.value.length-1))):(d(null),h(null))},children:(((E=o==null?void 0:o[o.length-1])==null?void 0:E.name)||r)&&i(T,{children:[e(de,{}),((R=o==null?void 0:o[o.length-1])==null?void 0:R.name)??"Settings"]})}),e("div",{className:"title",children:m??""}),e("div",{})]}),r&&e(L.div,{initial:{x:100,opacity:0},animate:{x:0,opacity:1},exit:{x:100,opacity:0},transition:{duration:.2},className:"settings-content",children:N.isValidElement(r)?r:r.map((I,A)=>e("section",{"data-last":A===P.length-1,children:I.map((n,f)=>i("div",{className:"settings-item","data-clickable":!!(n.options||n.onClick),onClick:()=>{if(n.onClick)return n.onClick();n.options&&(d(n.options),h(n.name),g.set([...g.value,{name:m,page:r}]))},children:[i("div",{className:"setting",children:[n.icon&&(typeof n.icon=="string"?e("img",{src:n.icon}):n.icon),e("div",{className:"title",children:n.name})]}),n.notification&&e("div",{className:"settings-notification",children:"1"}),i("div",{className:"setting-value",children:[n.switch&&e(k,{onChange:n.onChange,checked:n.value,disabled:n.disabled??!1}),n.value&&!n.switch&&e("div",{className:"value",children:n.value}),n.options&&e(G,{className:"chevron"})]})]},f))},A))},m)]})]})}export{Ie as Header,g as SettingsHistory,Ae as default};
