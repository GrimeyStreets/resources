import{u as p,r as f,as as w,i as E,L as n,j as s,a as l,be as G,o as S,bf as O,h as v,N as D,I as m,C as K,bg as Y,b3 as W,bh as C,F as U,bi as j,k as u,O as q,bj as z,a6 as V,aZ as B,af as H,y as h,bk as J}from"./index-CFbY8QCl.js";const $={characters:[{id:"1",firstname:"Loaf",lastname:"Scripts",dob:"1990-01-01",phoneNumber:"1234567890",isMale:!0,job:"Developer",height:180,licenses:["Driver's License"],vehicles:[{id:"1",model:"Ubermacht",plate:"ABC123",color:"#ff0000"}],properties:[{id:"1",label:"Groove Street Mansion",address:"Groove st. 3152"}]},{id:"1",firstname:"Breze",lastname:"Scripts",dob:"2000-01-01",phoneNumber:"1234567890",isMale:!0,job:"Developer",height:180,licenses:["Driver's License"],vehicles:[{id:"1",model:"Sentinel",plate:"DEF456",color:"#ff0000"}],properties:[{id:"1",label:"Vinewod Hill Mansion",address:"Vinewood st. 5112"}]}],licenses:["Driver's License","Motorcycle License","Truck License","Pilot's License","Boat License"]};function X(){var b,c,_,M,F,y,k,x;const e=p(T),i=p(o),a=p(r),[R,N]=f.useState(""),A=w(t=>{!e||!(i!=null&&i.avatar)||E.ContextMenu.set({buttons:[{title:n("APPS.REGISTRATION.REMOVE_AVATAR"),color:"red",cb:()=>o.set({...o==null?void 0:o.value,avatar:null})}]})}),I=w(t=>{!e||!(a!=null&&a.picture)||E.ContextMenu.set({buttons:[{title:n("APPS.REGISTRATION.REMOVE_PICTURE"),color:"red",cb:()=>r.set({...r==null?void 0:r.value,picture:null})}]})});return f.useEffect(()=>{i!=null&&i.id||o.set({isMale:!0})},[i==null?void 0:i.id]),s("main",{className:"main",style:{padding:"0"},children:l("div",{className:"grid",children:[l("div",{className:"grid-item profile",children:[s("div",{className:"top",children:s("div",{className:"title",children:n("APPS.REGISTRATION.CHARACTER_INFO")})}),l("div",{className:"profile",children:[l("div",{className:"mugshot",children:[s("img",{...A,"data-hasavatar":!!i.avatar,src:G(i.avatar,"profile"),onClick:()=>{i.avatar&&E.FullscreenImage.set(i.avatar)}}),!(i!=null&&i.avatar)&&e&&s(S.div,{...O,className:"add",onClick:()=>{E.ContextMenu.set({title:n("APPS.POLICE.PROFILES.ADD_AVATAR.TITLE"),buttons:[{title:n("APPS.POLICE.PROFILES.ADD_AVATAR.SET_PHOTO"),cb:()=>{E.Gallery.set({includeVideos:!1,onSelect:t=>{o.set({...o==null?void 0:o.value,avatar:t.src})}})}},{title:n("APPS.POLICE.PROFILES.ADD_AVATAR.PASTE_URL"),cb:()=>{let t="";E.PopUp.set({title:n("APPS.POLICE.PROFILES.ADD_AVATAR.PASTE_URL"),description:n("APPS.POLICE.PROFILES.ADD_AVATAR.PASTE_URL_DESCRIPTION"),input:{placeholder:n("APPS.POLICE.PROFILES.ADD_AVATAR.PASTE_URL_PLACEHOLDER"),minCharacters:5,maxCharacters:500,onChange:P=>{t=P}},buttons:[{title:n("APPS.POLICE.CANCEL")},{title:n("APPS.POLICE.SAVE"),cb:()=>{let P=t;P.match(/\.(jpeg|jpg|gif|png)$/)!=null&&P.match(/http(s?):\/\//)!=null?o.set({...o==null?void 0:o.value,avatar:P}):(D("error","Invalid URL / Invalid image URL"),setTimeout(()=>{E.PopUp.set({title:n("APPS.POLICE.PROFILES.ADD_AVATAR.INVALID_URL"),description:n("APPS.POLICE.PROFILES.ADD_AVATAR.INVALID_URL_DESCRIPTION"),buttons:[{title:n("APPS.POLICE.PROFILES.ADD_AVATAR.OK")}]})},500))}}]})}}]})},children:s(v,{})})]}),s("div",{className:"info",children:l("div",{className:"name",children:[i==null?void 0:i.firstname," ",i==null?void 0:i.lastname]})}),l("div",{className:"details",children:[l("div",{className:"item",children:[l("span",{children:[n("APPS.REGISTRATION.FIRSTNAME"),":"]}),e?s(m,{type:"text",value:(i==null?void 0:i.firstname)??"",onChange:t=>{o.set({...o==null?void 0:o.value,firstname:t.target.value})}}):s("div",{className:"value",children:i==null?void 0:i.firstname})]}),l("div",{className:"item",children:[l("span",{children:[n("APPS.REGISTRATION.LASTNAME"),":"]}),e?s(m,{type:"text",value:(i==null?void 0:i.lastname)??"",onChange:t=>{o.set({...o==null?void 0:o.value,lastname:t.target.value})}}):s("div",{className:"value",children:i==null?void 0:i.lastname})]}),l("div",{className:"item",children:[l("span",{children:[n("APPS.REGISTRATION.DOB"),":"]}),e?s(m,{type:"text",value:(i==null?void 0:i.dob)??((b=K.value)==null?void 0:b.DobFormat),onChange:t=>{o.set({...o==null?void 0:o.value,dob:t.target.value})}}):l("div",{className:"value",children:[(i==null?void 0:i.dob)??n("APPS.POLICE.MISC.UNKNOWN"),(i==null?void 0:i.dob)&&l("span",{children:["(",Y(i==null?void 0:i.dob),")"]})]})]}),l("div",{className:"item",children:[l("span",{children:[n("APPS.REGISTRATION.PHONE_NUMBER"),":"]}),e?s(m,{type:"text",value:(i==null?void 0:i.phoneNumber)??"",onChange:t=>{o.set({...o==null?void 0:o.value,phoneNumber:t.target.value})}}):s("div",{className:C("value",(i==null?void 0:i.phoneNumber)&&"blue"),children:i!=null&&i.phoneNumber?W(i==null?void 0:i.phoneNumber):n("APPS.POLICE.MISC.UNKNOWN")})]}),l("div",{className:"item",children:[l("span",{children:[n("APPS.REGISTRATION.GENDER"),":"]}),e?l("select",{onChange:t=>{o.set({...o==null?void 0:o.value,isMale:t.target.value==="true"})},children:[s("option",{value:"true",selected:i==null?void 0:i.isMale,children:n("APPS.REGISTRATION.MALE")}),s("option",{value:"false",selected:!(i!=null&&i.isMale),children:n("APPS.REGISTRATION.FEMALE")})]}):s("div",{className:"value",children:i.isMale?n("APPS.POLICE.PROFILES.MALE"):n("APPS.POLICE.PROFILES.FEMALE")})]}),l("div",{className:"item",children:[l("span",{children:[n("APPS.REGISTRATION.JOB"),":"]}),s("div",{className:"value",children:e?s(m,{type:"text",value:i==null?void 0:i.job,onChange:t=>{o.set({...o==null?void 0:o.value,job:t.target.value})}}):s("div",{className:"value",children:i==null?void 0:i.job})})]}),l("div",{className:"item",children:[l("span",{children:[n("APPS.REGISTRATION.HEIGHT"),":"]}),e?s(m,{type:"number",value:i==null?void 0:i.height,onChange:t=>{o.set({...o==null?void 0:o.value,height:parseInt(t.target.value)})}}):i!=null&&i.height?s("div",{className:"value",children:n("APPS.REGISTRATION.FORMATTED_HEIGHT",{height:(c=i==null?void 0:i.height)==null?void 0:c.toString()})}):s("div",{className:"value",children:n("APPS.POLICE.MISC.UNKNOWN")})]})]})]})]}),s("div",{className:"grid-item full",children:a?l(U,{children:[l("div",{className:"top",children:[s("div",{className:"title",children:n("APPS.REGISTRATION.VEHICLE")}),l("div",{className:"buttons",children:[a!=null&&a.id?l("div",{className:"button red",onClick:()=>{},children:[s(j,{}),n("APPS.REGISTRATION.DELETE")]}):l("div",{className:"button red",onClick:()=>{r.set(null),T.set(!1)},children:[s(j,{}),n("APPS.REGISTRATION.CANCEL")]}),l("div",{className:"button",onClick:()=>{var t;if(!a.model||!a.plate||!a.color)return D("error","Missing required fields");u("Registration",{action:"saveVehicle",id:i.id,data:a},(a==null?void 0:a.id)??(((t=i==null?void 0:i.vehicles)==null?void 0:t.length)??0)+1).then(P=>{var d;if(!P)return console.error("Failed to save vehicle");a.id?o.patch({vehicles:(d=i.vehicles)==null?void 0:d.map(L=>L.id===a.id?a:L)}):o.patch({vehicles:[...i.vehicles??[],{...a,id:P}]}),r.set(null)})},children:[s(v,{}),n("APPS.REGISTRATION.SAVE")]})]})]}),l("div",{className:"profile",children:[l("div",{className:"mugshot",children:[s("img",{...I,"data-hasavatar":!!a.picture,src:G(a.picture,"vehicle"),onClick:()=>{a.picture&&E.FullscreenImage.set(a.picture)}}),!(a!=null&&a.picture)&&e&&s(S.div,{...O,className:"add",onClick:()=>{E.ContextMenu.set({title:n("APPS.POLICE.VEHICLES.ADD_PHOTO.TITLE"),buttons:[{title:n("APPS.POLICE.VEHICLES.ADD_PHOTO.SET_PHOTO"),cb:()=>{E.Gallery.set({includeVideos:!1,onSelect:t=>{r.set({...r==null?void 0:r.value,picture:t.src})}})}},{title:n("APPS.POLICE.VEHICLES.ADD_PHOTO.PASTE_URL"),cb:()=>{let t="";E.PopUp.set({title:n("APPS.POLICE.VEHICLES.ADD_PHOTO.PASTE_URL"),description:n("APPS.POLICE.VEHICLES.ADD_PHOTO.PASTE_URL_DESCRIPTION"),input:{placeholder:n("APPS.POLICE.VEHICLES.ADD_PHOTO.PASTE_URL_PLACEHOLDER"),minCharacters:5,maxCharacters:500,onChange:P=>{t=P}},buttons:[{title:n("APPS.POLICE.CANCEL")},{title:n("APPS.POLICE.SAVE"),cb:()=>{let P=t;P.match(/\.(jpeg|jpg|gif|png)$/)!=null&&P.match(/http(s?):\/\//)!=null?r.set({...r==null?void 0:r.value,picture:P}):(D("error","Invalid URL / Invalid image URL"),setTimeout(()=>{E.PopUp.set({title:n("APPS.POLICE.VEHICLES.ADD_PHOTO.INVALID_URL"),description:n("APPS.POLICE.VEHICLES.ADD_PHOTO.INVALID_URL_DESCRIPTION"),buttons:[{title:n("APPS.POLICE.VEHICLES.ADD_PHOTO.OK")}]})},500))}}]})}}]})},children:s(v,{})})]}),s("div",{className:"info",children:s("div",{className:"name",children:a==null?void 0:a.model})}),l("div",{className:"details",children:[l("div",{className:"item",children:[l("span",{children:[n("APPS.REGISTRATION.MODEL"),":"]}),!(a!=null&&a.id)||e?s(m,{type:"text",value:(a==null?void 0:a.model)??"",onChange:t=>{r.set({...r==null?void 0:r.value,model:t.target.value})}}):s("div",{className:"value",children:a==null?void 0:a.model})]}),l("div",{className:"item",children:[l("span",{children:[n("APPS.REGISTRATION.PLATE"),":"]}),!(a!=null&&a.id)||e?s(m,{type:"text",value:(a==null?void 0:a.plate)??"",onChange:t=>{r.set({...r==null?void 0:r.value,plate:t.target.value})}}):s("div",{className:"value",children:a==null?void 0:a.plate})]}),l("div",{className:"item",children:[l("span",{children:[n("APPS.REGISTRATION.COLOR"),":"]}),s("div",{className:"value",children:s("div",{className:"color",style:{backgroundColor:(a==null?void 0:a.color)??"rgb(0,0,0)",cursor:!(a!=null&&a.id)||e?"pointer":"default"},onClick:()=>{!e&&(a!=null&&a.id)||E.ColorPicker.set({defaultColor:a==null?void 0:a.color,onSelect:t=>{r.set({...r==null?void 0:r.value,color:t})}})}})})]})]}),(a==null?void 0:a.id)&&s("div",{className:"button red",onClick:()=>{E.PopUp.set({title:n("APPS.REGISTRATION.DELETE_VEHICLE_POPUP.TITLE"),description:n("APPS.REGISTRATION.DELETE_VEHICLE_POPUP.DESCRIPTION"),buttons:[{title:n("APPS.REGISTRATION.CANCEL")},{title:n("APPS.REGISTRATION.DELETE"),color:"red",cb:()=>{u("Registration",{action:"deleteVehicle",characterId:i.id,vehicleId:a.id},!0).then(t=>{if(!t)return console.error("Failed to delete vehicle");o.patch({vehicles:i.vehicles.filter(P=>P.id!==a.id)}),r.set(null),T.set(!1)})}}]})},children:n("APPS.REGISTRATION.DELETE_VEHICLE")})]})]}):l(U,{children:[l("div",{className:"top",children:[s("div",{className:"title",children:n("APPS.REGISTRATION.VEHICLES")}),(i==null?void 0:i.id)&&l("div",{className:"button",onClick:()=>{r.set({})},children:[s(v,{}),n("APPS.REGISTRATION.CREATE")]})]}),s(q,{placeholder:n("APPS.REGISTRATION.SEARCH_VEHICLES"),onChange:t=>N(t.target.value)}),s("div",{className:"items",children:(M=(_=i==null?void 0:i.vehicles)==null?void 0:_.filter(t=>{var P,d;return((P=t==null?void 0:t.model)==null?void 0:P.toLowerCase().includes(R==null?void 0:R.toLowerCase()))||((d=t==null?void 0:t.plate)==null?void 0:d.toLowerCase().includes(R.toLowerCase()))}))==null?void 0:M.map(t=>l(S.div,{...z,className:"item home",onClick:()=>{r.set(t),T.set(!0)},children:[s("img",{src:G(t.picture,"vehicle")}),l("div",{className:"item-content",children:[l("div",{className:"item-title",children:[t.model,s("div",{className:"color",style:{backgroundColor:t.color}})]}),s("div",{className:"item-subtitle",children:t.model})]})]},t.id))})]})}),s("div",{className:"grid-item",children:l("div",{className:"grid vertical",children:[l("div",{className:"grid-item half",children:[l("div",{className:"top",children:[s("div",{className:"title",children:n("APPS.REGISTRATION.LICENSES")}),(i==null?void 0:i.id)&&l(S.div,{...O,className:"button",onClick:()=>{u("Registration",{action:"getLicenses"},$.licenses).then(t=>{if(!t)return D("error","No licenses were returned");E.ContextMenu.set({title:n("APPS.REGISTRATION.ADD_LICENSE"),buttons:t==null?void 0:t.map(P=>({title:P,cb:()=>{u("Registration",{action:"addLicense",id:i.id,license:P},!0).then(d=>{if(!d)return console.error("Failed to save license");o.patch({licenses:[...(i==null?void 0:i.licenses)??[],P]})})}}))})})},children:[s(v,{}),n("APPS.REGISTRATION.ADD")]})]}),s("div",{className:"items",children:l("div",{className:"cards",children:[(!(i!=null&&i.licenses)||((F=i==null?void 0:i.licenses)==null?void 0:F.length)===0)&&s("div",{className:"no-results",children:n("APPS.POLICE.PROFILES.LICENSES.NO_LICENSES")}),(y=i==null?void 0:i.licenses)==null?void 0:y.map((t,P)=>s("div",{className:C("card blue",e&&"clickable"),onClick:()=>{e&&E.PopUp.set({title:n("APPS.REGISTRATION.DELETE_LICENSE_POPUP.TITLE"),description:n("APPS.REGISTRATION.DELETE_LICENSE_POPUP.DESCRIPTION"),buttons:[{title:n("APPS.REGISTRATION.CANCEL")},{title:n("APPS.REGISTRATION.DELETE"),color:"red",cb:()=>{u("Registration",{action:"deleteLicense",id:i.id,license:t},!0).then(d=>{if(!d)return console.error("Failed to delete property");o.patch({licenses:i.licenses.filter(L=>L!==t)})})}}]})},children:t},P))]})})]}),l("div",{className:"grid-item half",children:[l("div",{className:"top",children:[s("div",{className:"title",children:n("APPS.REGISTRATION.PROPERTIES")}),(i==null?void 0:i.id)&&l(S.div,{...O,className:"button",onClick:()=>{let t={label:"",address:""};E.PopUp.set({title:n("APPS.REGISTRATION.ADD_PROPERTY_POPUP.TITLE"),description:n("APPS.REGISTRATION.ADD_PROPERTY_POPUP.DESCRIPTION"),inputs:[{placeholder:n("APPS.REGISTRATION.ADD_PROPERTY_POPUP.LABEL"),onChange:P=>{t.label=P}},{placeholder:n("APPS.REGISTRATION.ADD_PROPERTY_POPUP.ADDRESS"),onChange:P=>{t.address=P}}],buttons:[{title:n("APPS.REGISTRATION.CANCEL")},{title:n("APPS.REGISTRATION.SAVE"),cb:()=>{var P;u("Registration",{action:"addProperty",id:i.id,data:t},(((P=i==null?void 0:i.properties)==null?void 0:P.length)??0)+1).then(d=>{if(!d)return console.error("Failed to save property");o.patch({properties:[...(i==null?void 0:i.properties)??[],{...t,id:d}]})})}}]})},children:[s(v,{}),n("APPS.REGISTRATION.ADD")]})]}),s("div",{className:"items",children:l("div",{className:"cards",children:[(!(i!=null&&i.properties)||((k=i==null?void 0:i.properties)==null?void 0:k.length)===0)&&s("div",{className:"no-results",children:n("APPS.POLICE.PROFILES.NO_PROPERTIES")}),(x=i==null?void 0:i.properties)==null?void 0:x.map((t,P)=>l("div",{className:C("card blue",e&&"clickable"),onClick:()=>{e&&E.PopUp.set({title:n("APPS.REGISTRATION.DELETE_PROPERTY_POPUP.TITLE"),description:n("APPS.REGISTRATION.DELETE_PROPERTY_POPUP.DESCRIPTION"),buttons:[{title:n("APPS.REGISTRATION.CANCEL")},{title:n("APPS.REGISTRATION.DELETE"),color:"red",cb:()=>{u("Registration",{action:"deleteProperty",id:i.id,propertyId:t.id},!0).then(d=>{if(!d)return console.error("Failed to delete property");o.patch({properties:i.properties.filter(L=>L.id!==t.id)})})}}]})},children:[t.label," ",t.address&&`(${t.address})`]},P))]})})]}),l("div",{className:"grid-item full",children:[s("div",{className:"top",children:s("div",{className:"title",children:n("APPS.REGISTRATION.DESCRIPTION")})}),s("div",{className:"items",children:s(V,{className:"note",placeholder:n("APPS.REGISTRATION.DESCRIPTION_PLACEHOLDER"),disabled:!e,style:{height:"100%"},value:i==null?void 0:i.description,onChange:t=>{o.set({...o==null?void 0:o.value,description:t.target.value})}})})]})]})})]})})}function Z(){const e=p(g),i=p(o),a=p(T),R=()=>{let A=["firstname","lastname","dob","height","job"];if(!A.every(I=>i[I])){E.PopUp.set({title:n("APPS.REGISTRATION.ERROR.TITLE"),description:n("APPS.REGISTRATION.ERROR.MISSING_FIELDS",{fields:A.filter(I=>!i[I]).map(I=>n(`APPS.REGISTRATION.${I.toUpperCase()}`)).join(", ")}),buttons:[{title:n("APPS.REGISTRATION.ERROR.OK")}]});return}u("Registration",{action:"saveCharacter",data:i},!0).then(I=>{if(!I)return console.error("Failed to save character");if(i.id){const b=e.findIndex(c=>c.id===i.id);g.set(g.value.map((c,_)=>_===b?i:c))}else g.set([...e,{...i,id:I}]),o.set({...i,id:I});T.set(!1)})},N=()=>{u("Registration",{action:"deleteCharacter",id:i.id},!0).then(A=>{if(!A)return console.error("Failed to delete character");g.set(e.filter(I=>I.id!==i.id)),o.set(null),T.set(!1)})};return l("header",{className:"registration-header",children:[l("div",{className:"selected-character",children:[s(Q,{title:i!=null&&i.firstname&&(i!=null&&i.lastname)?`${i==null?void 0:i.firstname} ${i==null?void 0:i.lastname}`:n("APPS.REGISTRATION.SELECT_CHARACTER"),items:(e==null?void 0:e.map(A=>({title:`${A.firstname} ${A.lastname}`,icon:s(B,{}),onSelect:()=>o.set(A)})))||[]}),l("div",{className:"button",onClick:()=>{T.set(!0),o.set({})},children:[s(v,{}),n("APPS.REGISTRATION.CREATE_NEW")]})]}),s("div",{className:"buttons",children:s(H,{children:i&&(a?l(U,{children:[s("div",{...O,className:"button",onClick:R,children:n("APPS.REGISTRATION.SAVE")}),i.id&&s("div",{...O,className:"button red",onClick:N,children:n("APPS.REGISTRATION.DELETE_CHARACTER")})]}):s("div",{...O,className:"button",onClick:()=>T.set(!a),children:n("APPS.REGISTRATION.EDIT")}))})})]})}const T=h(!0),g=h([]),o=h(null),r=h(null);function ni(){const e=p(o);return f.useEffect(()=>{u("Registration",{action:"getCharacters"},$.characters).then(i=>{if(!i)return D("error","No characters were returned");D("info","Receiving characters:",i),g.set(i)})},[]),f.useEffect(()=>{e!=null&&e.id&&T.set(!1)},[e==null?void 0:e.id]),l("div",{className:"registration-container",children:[s(Z,{}),s("main",{children:s("div",{className:"main-container",children:s(H,{children:s("div",{className:"main-wrapper",children:s(S.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{ease:"easeInOut",duration:.25},className:"registration-container",children:e?s(X,{}):s("div",{className:"select-character",children:n("APPS.REGISTRATION.PLEASE_SELECT_CHARACTER")})})})})})})]})}const Q=({title:e,items:i})=>{const[a,R]=f.useState(!1);return l("a",{className:"dropdown",onMouseEnter:()=>R(!0),onMouseLeave:()=>R(!1),children:[l("div",{className:"dropdown-info",children:[s(B,{}),e]}),s(J,{}),s(H,{children:a&&i.length>0&&s(S.div,{className:"dropdown-content",initial:{opacity:0,y:-10,transform:"translateX(-50%)"},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.15,ease:"easeInOut"},children:i.map((N,A)=>l(S.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.1,ease:"easeInOut",delay:A*.025},className:"dropdown-item",onClick:()=>{N.onSelect(),R(!1)},children:[N.icon&&N.icon,N.title]},A))})})]})};export{g as Characters,Q as Dropdown,T as EditMode,o as SelectedCharacter,r as SelectedVehicle,ni as default};
